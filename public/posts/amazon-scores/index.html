<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Amazon scores | The new Python Developer</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="What if Amazon had different scoring for pages?">
    <meta name="generator" content="Hugo 0.110.0">
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >



    
    
    
      

    

    
    
    <meta property="og:title" content="Amazon scores" />
<meta property="og:description" content="What if Amazon had different scoring for pages?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://hugdbrown.github.io/posts/amazon-scores/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2015-07-08T00:00:00+00:00" />
<meta property="article:modified_time" content="2015-07-08T00:00:00+00:00" />
<meta itemprop="name" content="Amazon scores">
<meta itemprop="description" content="What if Amazon had different scoring for pages?"><meta itemprop="datePublished" content="2015-07-08T00:00:00+00:00" />
<meta itemprop="dateModified" content="2015-07-08T00:00:00+00:00" />
<meta itemprop="wordCount" content="520">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Amazon scores"/>
<meta name="twitter:description" content="What if Amazon had different scoring for pages?"/>

	
  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        The new Python Developer
      
    </a>
    <div class="flex-l items-center">
      

      
      
<div class="ananke-socials">
  
</div>

    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked">
          
        POSTS
      </aside>
      










  <div id="sharing" class="mt3 ananke-socials">
    
  </div>


      <h1 class="f1 athelas mt3 mb1">Amazon scores</h1>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2015-07-08T00:00:00Z">July 8, 2015</time>
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p>It has kind of bugged me for a while that Amazon uses a weighted average
to score products. Really, itâ€™s not how I think of it. The closest thing I
have used is to look at how many 1-star ratings there are versus the 5-star
ratings, and to divide the 5-star count by the 1-star count. A product that
is 50% 5-star and 50% 1-star is a 1 in my books. I look for at least a 5 &ndash;
75% 5-star to 15% 1-star, for example.</p>
<p>The products that I have seen with the best ratings are:</p>
<ul>
<li><a href="http://www.amazon.com/Miss-Fishers-Murder-Mysteries-1">Miss Fisher Murder Mysteries 1</a></li>
<li><a href="http://www.amazon.com/Miss-Fishers-Murder-Mysteries-2">Miss Fisher Murder Mysteries 2</a></li>
<li><a href="http://www.amazon.com/Claudius-35th-Anniversary-Sian-Phillips/dp/B006JY3OHW">I, Claudius</a></li>
<li><a href="http://www.amazon.com/Prime-Suspect-Collection-Helen-Mirren/dp/B0028AEO0M">Prime Suspect</a></li>
</ul>
<p>As you can see, they are all exceptionally strong.</p>
<p>But I would really prefer if there were a profile option to choose one of several alternative
scoring algorithms. Here are some alternatives I cam up with:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> exp<span style="color:#f92672">,</span> log<span style="color:#f92672">,</span> sqrt
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">cube</span>(total):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> total <span style="color:#f92672">**</span> <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">cuberoot</span>(total):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> total <span style="color:#f92672">**</span> (<span style="color:#ae81ff">1</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">3.0</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">square</span>(total):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> total <span style="color:#f92672">**</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">identity</span>(total):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> total
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">score_param</span>(series, fn1, fn2):
</span></span><span style="display:flex;"><span>    item_count <span style="color:#f92672">=</span> sum(series<span style="color:#f92672">.</span>values())
</span></span><span style="display:flex;"><span>    total <span style="color:#f92672">=</span> sum(fn1(score) <span style="color:#f92672">*</span> count <span style="color:#66d9ef">for</span> score, count <span style="color:#f92672">in</span> series<span style="color:#f92672">.</span>items())
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> fn2(float(total) <span style="color:#f92672">/</span> item_count)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">score_weighted</span>(scores):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> score_param(scores, identity, identity)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">score_sqrt</span>(scores):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> score_param(scores, sqrt, square)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">score_log</span>(scores):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> score_param(scores, log, exp)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">score_square</span>(scores):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> score_param(scores, square, sqrt)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">score_cube</span>(scores):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> score_param(scores, cube, cuberoot)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">score_cuberoot</span>(scores):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> score_param(scores, cuberoot, cube)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">score_dict</span>(series):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> {i: item <span style="color:#66d9ef">for</span> i, item <span style="color:#f92672">in</span> enumerate(series, start<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>)}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">main</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">11</span>):
</span></span><span style="display:flex;"><span>        src <span style="color:#f92672">=</span> {<span style="color:#ae81ff">5</span>: <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>: i}
</span></span><span style="display:flex;"><span>        print(
</span></span><span style="display:flex;"><span>            i,
</span></span><span style="display:flex;"><span>            score_log(src),
</span></span><span style="display:flex;"><span>            score_weighted(src),
</span></span><span style="display:flex;"><span>            score_sqrt(src),
</span></span><span style="display:flex;"><span>            score_square(src),
</span></span><span style="display:flex;"><span>            score_cuberoot(src),
</span></span><span style="display:flex;"><span>            score_cube(src),
</span></span><span style="display:flex;"><span>        )
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;__main__&#39;</span>:
</span></span><span style="display:flex;"><span>    main()
</span></span></code></pre></div><p>The idea is that you apply a function to aggregate the values and then a second function
to scale the aggregated number back onto the range. Like, if you sum the cubed values you
then take the cube root of the result to return to the original range.</p>
<p>My preference is to use <code>log</code> and <code>exp</code>. I think it does the best job of emphasizing high ratings
and reducing the gain from low ratings.</p>
<p>If you look at the high-rated products I cited, you don&rsquo;t see much change in score:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> math
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>vectors <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># http://www.amazon.com/Miss-Fishers-Murder-Mysteries-2</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;miss_fisher_1&#34;</span>: [<span style="color:#ae81ff">0.02</span>, <span style="color:#ae81ff">0.02</span>, <span style="color:#ae81ff">0.05</span>, <span style="color:#ae81ff">0.16</span>, <span style="color:#ae81ff">0.75</span>],
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># http://www.amazon.com/Miss-Fishers-Murder-Mysteries-2</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;miss_fisher_2&#34;</span>: [<span style="color:#ae81ff">0.0</span>, <span style="color:#ae81ff">0.0</span>, <span style="color:#ae81ff">0.01</span>, <span style="color:#ae81ff">0.06</span>, <span style="color:#ae81ff">0.93</span>],
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># http://www.amazon.com/Prime-Suspect-Collection-Helen-Mirren/dp/B0028AEO0M</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;prime_suspect&#34;</span>: [<span style="color:#ae81ff">0.01</span>, <span style="color:#ae81ff">0.02</span>, <span style="color:#ae81ff">0.04</span>, <span style="color:#ae81ff">0.11</span>, <span style="color:#ae81ff">0.82</span>],
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># http://www.amazon.com/Claudius-35th-Anniversary-Sian-Phillips/dp/B006JY3OHW</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;i_claudius&#34;</span>: [<span style="color:#ae81ff">0.02</span>, <span style="color:#ae81ff">0.01</span>, <span style="color:#ae81ff">0.03</span>, <span style="color:#ae81ff">0.06</span>, <span style="color:#ae81ff">0.88</span>],
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">dot_product</span>(arr, scores):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> sum(a <span style="color:#f92672">*</span> s <span style="color:#66d9ef">for</span> a, s <span style="color:#f92672">in</span> zip(arr, scores))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">amazon_score</span>(m):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> dot_product(m, range(<span style="color:#ae81ff">1</span>, len(m) <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">my_score</span>(m):
</span></span><span style="display:flex;"><span>    values <span style="color:#f92672">=</span> [math<span style="color:#f92672">.</span>log(r) <span style="color:#66d9ef">for</span> r <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, len(m) <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>)]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> math<span style="color:#f92672">.</span>exp(dot_product(m, values))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> name, v <span style="color:#f92672">in</span> vectors<span style="color:#f92672">.</span>items():
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;{&#39;-&#39; * 30} </span><span style="color:#e6db74">{name}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>    print(amazon_score(v))
</span></span><span style="display:flex;"><span>    print(my_score(v))
</span></span></code></pre></div><p>Results:</p>
<pre tabindex="0"><code>------------------------------ miss_fisher_1
4.6
4.47129953528
------------------------------ miss_fisher_2
4.92
4.90836573947
------------------------------ i_claudius
4.77
4.66166586061
------------------------------ prime_suspect
4.71
4.61835648708
</code></pre><p>Products that have higher ratios of 1-star ratings are affected more, as shown here:</p>
<pre tabindex="0"><code>bad = {
    &#34;jaws_the_revenge&#34;: [0.31, 0.10, 0.09, 0.11, 0.39],
    &#34;inappropriate_comedy&#34;: [0.35, 0.1, 0.14, 0.08, 0.35],
    &#34;staying_alive&#34;: [0.10, 0.05, 0.10, 0.11, 0.64],
}

for name, v in bad.items():
    print(&#34;{&#39;-&#39; * 30} {name}&#34;)
    print(amazon_score(v))
    print(my_score(v))
</code></pre><pre tabindex="0"><code>------------------------------ jaws_the_revenge
3.17
2.581480288440958
------------------------------ inappropriate_comedy
3.04
2.453038000783671
------------------------------ staying_alive
4.140000000000001
3.7699103886019767
</code></pre><ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://hugdbrown.github.io/" >
    &copy;  The new Python Developer 2023 
  </a>
    <div>
<div class="ananke-socials">
  
</div>
</div>
  </div>
</footer>

  </body>
</html>
